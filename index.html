<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Science & ML Mastery Challenge</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            max-width: 900px;
            width: 95%;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .header {
            background: linear-gradient(135deg, #FF6B6B, #4ECDC4);
            color: white;
            padding: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            position: relative;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            position: relative;
        }

        .progress-container {
            padding: 1.5rem 2rem;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #e9ecef;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FF6B6B, #4ECDC4);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 6px;
        }

        .progress-text {
            text-align: center;
            font-weight: 600;
            color: #495057;
        }

        .question-container {
            padding: 2rem;
            min-height: 400px;
        }

        .question {
            margin-bottom: 2rem;
        }

        .question h3 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: #2c3e50;
            line-height: 1.6;
        }

        .difficulty-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .basic {
            background: #d4edda;
            color: #155724;
        }

        .intermediate {
            background: #fff3cd;
            color: #856404;
        }

        .advanced {
            background: #f8d7da;
            color: #721c24;
        }

        .options {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .option {
            padding: 1rem;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .option:hover {
            border-color: #4ECDC4;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .option.selected {
            border-color: #FF6B6B;
            background: #fff5f5;
        }

        .option.correct {
            border-color: #28a745;
            background: #d4edda;
        }

        .option.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }

        .code-area {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 1rem 0;
            overflow-x: auto;
        }

        .text-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            resize: vertical;
            min-height: 100px;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 2px solid #e9ecef;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #FF6B6B, #4ECDC4);
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .results {
            text-align: center;
            padding: 3rem 2rem;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 2rem auto;
            font-size: 3rem;
            font-weight: bold;
            color: white;
        }

        .excellent {
            background: linear-gradient(135deg, #00b09b, #96c93d);
        }

        .good {
            background: linear-gradient(135deg, #4ECDC4, #44A08D);
        }

        .average {
            background: linear-gradient(135deg, #f093fb, #f5576c);
        }

        .needs-improvement {
            background: linear-gradient(135deg, #ff9a9e, #fecfef);
            color: #333;
        }

        .feedback {
            font-size: 1.2rem;
            margin: 2rem 0;
            line-height: 1.6;
        }

        .email-section {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 10px;
            margin-top: 2rem;
        }

        .hidden {
            display: none;
        }

        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        @keyframes confetti {
            0% {
                transform: translateY(-100vh) rotateZ(0deg);
            }
            100% {
                transform: translateY(100vh) rotateZ(360deg);
            }
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #FF6B6B;
            animation: confetti 3s linear infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸš€ Data Science & ML Mastery Challenge</h1>
            <p>Test your knowledge with 50 carefully crafted questions</p>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Question 1 of 50</div>
        </div>

        <div class="question-container" id="questionContainer">
            <!-- Questions will be populated here -->
        </div>

        <div class="results hidden" id="resultsContainer">
            <h2>ðŸŽ‰ Challenge Complete!</h2>
            <div class="score-circle" id="scoreCircle">
                <span id="finalScore">0%</span>
            </div>
            <div class="feedback" id="feedback"></div>
            
            <div class="email-section">
                <h3>ðŸ“§ Get Your Detailed Report</h3>
                <p>Enter your email to receive a comprehensive analysis of your performance:</p>
                <input type="email" id="emailInput" placeholder="your.email@example.com" class="text-input" style="min-height: auto; margin: 1rem 0;">
                <button class="btn btn-primary" onclick="sendResults()">Send My Report</button>
            </div>
        </div>
    </div>

    <div class="celebration hidden" id="celebration"></div>

    <script>
        const questions = [
            // BASIC LEVEL (Questions 1-15)
            {
                id: 1,
                type: 'mcq',
                difficulty: 'basic',
                question: 'What does "ML" stand for in data science?',
                options: [
                    'Machine Language',
                    'Machine Learning',
                    'Mathematical Logic',
                    'Multi-Level'
                ],
                correct: 1
            },
            {
                id: 2,
                type: 'mcq',
                difficulty: 'basic',
                question: 'Which of the following is NOT a type of machine learning?',
                options: [
                    'Supervised Learning',
                    'Unsupervised Learning',
                    'Reinforcement Learning',
                    'Deterministic Learning'
                ],
                correct: 3
            },
            {
                id: 3,
                type: 'mcq',
                difficulty: 'basic',
                question: 'What is the primary goal of data preprocessing?',
                options: [
                    'To make data larger',
                    'To clean and prepare data for analysis',
                    'To visualize data',
                    'To store data permanently'
                ],
                correct: 1
            },
            {
                id: 4,
                type: 'mcq',
                difficulty: 'basic',
                question: 'Which Python library is most commonly used for data manipulation?',
                options: [
                    'NumPy',
                    'Pandas',
                    'Matplotlib',
                    'Scikit-learn'
                ],
                correct: 1
            },
            {
                id: 5,
                type: 'mcq',
                difficulty: 'basic',
                question: 'What does CSV stand for?',
                options: [
                    'Computer System Values',
                    'Comma Separated Values',
                    'Central Storage Variable',
                    'Core Statistical Variance'
                ],
                correct: 1
            },
            {
                id: 6,
                type: 'mcq',
                difficulty: 'basic',
                question: 'In a dataset, what is a "feature"?',
                options: [
                    'A row of data',
                    'An individual data point',
                    'A column or attribute',
                    'The target variable'
                ],
                correct: 2
            },
            {
                id: 7,
                type: 'mcq',
                difficulty: 'basic',
                question: 'What is overfitting in machine learning?',
                options: [
                    'When a model is too simple',
                    'When a model performs poorly on training data',
                    'When a model memorizes training data but fails on new data',
                    'When a model takes too long to train'
                ],
                correct: 2
            },
            {
                id: 8,
                type: 'mcq',
                difficulty: 'basic',
                question: 'Which of these is a supervised learning algorithm?',
                options: [
                    'K-means clustering',
                    'Linear regression',
                    'PCA',
                    'DBSCAN'
                ],
                correct: 1
            },
            {
                id: 9,
                type: 'mcq',
                difficulty: 'basic',
                question: 'What is the purpose of train-test split?',
                options: [
                    'To speed up training',
                    'To evaluate model performance on unseen data',
                    'To reduce memory usage',
                    'To clean the data'
                ],
                correct: 1
            },
            {
                id: 10,
                type: 'mcq',
                difficulty: 'basic',
                question: 'Which metric is commonly used for classification problems?',
                options: [
                    'Mean Squared Error',
                    'Accuracy',
                    'R-squared',
                    'Mean Absolute Error'
                ],
                correct: 1
            },
            {
                id: 11,
                type: 'mcq',
                difficulty: 'basic',
                question: 'What does API stand for?',
                options: [
                    'Application Programming Interface',
                    'Automated Program Integration',
                    'Advanced Python Implementation',
                    'Applied Programming Intelligence'
                ],
                correct: 0
            },
            {
                id: 12,
                type: 'mcq',
                difficulty: 'basic',
                question: 'Which of these is used for data visualization in Python?',
                options: [
                    'NumPy',
                    'Pandas',
                    'Matplotlib',
                    'Sklearn'
                ],
                correct: 2
            },
            {
                id: 13,
                type: 'mcq',
                difficulty: 'basic',
                question: 'What is a DataFrame in pandas?',
                options: [
                    'A type of graph',
                    'A 2-dimensional labeled data structure',
                    'A machine learning model',
                    'A data visualization tool'
                ],
                correct: 1
            },
            {
                id: 14,
                type: 'mcq',
                difficulty: 'basic',
                question: 'Which of these represents missing data in pandas?',
                options: [
                    'NULL',
                    'NaN',
                    'None',
                    'All of the above'
                ],
                correct: 3
            },
            {
                id: 15,
                type: 'mcq',
                difficulty: 'basic',
                question: 'What is the first step in any data science project?',
                options: [
                    'Build the model',
                    'Define the problem',
                    'Clean the data',
                    'Deploy the solution'
                ],
                correct: 1
            },

            // INTERMEDIATE LEVEL (Questions 16-35)
            {
                id: 16,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'What is the difference between bagging and boosting?',
                options: [
                    'Bagging trains models sequentially, boosting trains in parallel',
                    'Bagging trains models in parallel, boosting trains sequentially',
                    'There is no difference',
                    'Bagging is for regression, boosting is for classification'
                ],
                correct: 1
            },
            {
                id: 17,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'In cross-validation, what does "k" represent in k-fold CV?',
                options: [
                    'Number of features',
                    'Number of folds/partitions',
                    'Number of models',
                    'Number of iterations'
                ],
                correct: 1
            },
            {
                id: 18,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'What is the curse of dimensionality?',
                options: [
                    'Too few features to build good models',
                    'Problems that arise when working with high-dimensional data',
                    'When models become too complex',
                    'When data has too many rows'
                ],
                correct: 1
            },
            {
                id: 19,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'Which regularization technique adds the sum of absolute values of parameters?',
                options: [
                    'L1 (Lasso)',
                    'L2 (Ridge)',
                    'Elastic Net',
                    'Dropout'
                ],
                correct: 0
            },
            {
                id: 20,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'What is the main advantage of Random Forest over Decision Trees?',
                options: [
                    'Faster training',
                    'Better interpretability',
                    'Reduced overfitting',
                    'Simpler implementation'
                ],
                correct: 2
            },
            {
                id: 21,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'In PCA, what do the principal components represent?',
                options: [
                    'Original features',
                    'Directions of maximum variance',
                    'Cluster centers',
                    'Classification boundaries'
                ],
                correct: 1
            },
            {
                id: 22,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'What is the purpose of feature scaling?',
                options: [
                    'To reduce the number of features',
                    'To ensure features contribute equally to distance calculations',
                    'To remove outliers',
                    'To increase model complexity'
                ],
                correct: 1
            },
            {
                id: 23,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'Which evaluation metric is best for imbalanced datasets?',
                options: [
                    'Accuracy',
                    'Precision',
                    'F1-score',
                    'Mean Squared Error'
                ],
                correct: 2
            },
            {
                id: 24,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'What does AUC-ROC measure?',
                options: [
                    'Model accuracy',
                    'Model complexity',
                    'Model ability to distinguish between classes',
                    'Training time'
                ],
                correct: 2
            },
            {
                id: 25,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'In gradient descent, what does the learning rate control?',
                options: [
                    'Number of iterations',
                    'Size of steps toward the minimum',
                    'Number of features used',
                    'Complexity of the model'
                ],
                correct: 1
            },
            {
                id: 26,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'What is ensemble learning?',
                options: [
                    'Training one very complex model',
                    'Combining multiple models to make predictions',
                    'Using unsupervised learning techniques',
                    'Preprocessing data before modeling'
                ],
                correct: 1
            },
            {
                id: 27,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'Which algorithm is sensitive to outliers?',
                options: [
                    'Decision Trees',
                    'Random Forest',
                    'K-Means Clustering',
                    'Naive Bayes'
                ],
                correct: 2
            },
            {
                id: 28,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'What is the main assumption of Naive Bayes?',
                options: [
                    'Features are normally distributed',
                    'Features are independent',
                    'Data is linear',
                    'No missing values'
                ],
                correct: 1
            },
            {
                id: 29,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'In time series analysis, what is stationarity?',
                options: [
                    'Data that doesn\'t change over time',
                    'Data with constant mean and variance over time',
                    'Data with no missing values',
                    'Data that is normally distributed'
                ],
                correct: 1
            },
            {
                id: 30,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'What is the purpose of dropout in neural networks?',
                options: [
                    'Speed up training',
                    'Prevent overfitting',
                    'Reduce memory usage',
                    'Improve accuracy'
                ],
                correct: 1
            },
            {
                id: 31,
                type: 'text',
                difficulty: 'intermediate',
                question: 'Complete this Python code to calculate the mean of a list:\n\ndef calculate_mean(numbers):\n    return ___________',
                answer: 'sum(numbers) / len(numbers)'
            },
            {
                id: 32,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'What is the difference between Type I and Type II errors?',
                options: [
                    'Type I: False Positive, Type II: False Negative',
                    'Type I: False Negative, Type II: False Positive',
                    'Type I: Accuracy, Type II: Precision',
                    'Type I: Training error, Type II: Test error'
                ],
                correct: 0
            },
            {
                id: 33,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'Which distance metric is used in K-Means clustering by default?',
                options: [
                    'Manhattan distance',
                    'Euclidean distance',
                    'Cosine similarity',
                    'Hamming distance'
                ],
                correct: 1
            },
            {
                id: 34,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'What is the purpose of GridSearchCV?',
                options: [
                    'To visualize data',
                    'To find optimal hyperparameters',
                    'To clean missing values',
                    'To split data'
                ],
                correct: 1
            },
            {
                id: 35,
                type: 'mcq',
                difficulty: 'intermediate',
                question: 'In SQL, which JOIN returns all records from both tables?',
                options: [
                    'INNER JOIN',
                    'LEFT JOIN',
                    'RIGHT JOIN',
                    'FULL OUTER JOIN'
                ],
                correct: 3
            },

            // ADVANCED LEVEL (Questions 36-50)
            {
                id: 36,
                type: 'mcq',
                difficulty: 'advanced',
                question: 'What is the vanishing gradient problem in deep learning?',
                options: [
                    'Gradients become too large during backpropagation',
                    'Gradients become very small in early layers during backpropagation',
                    'Gradients disappear completely',
                    'Gradients change sign randomly'
                ],
                correct: 1
            },
            {
                id: 37,
                type: 'mcq',
                difficulty: 'advanced',
                question: 'Which activation function helps mitigate the vanishing gradient problem?',
                options: [
                    'Sigmoid',
                    'Tanh',
                    'ReLU',
                    'Linear'
                ],
                correct: 2
            },
            {
                id: 38,
                type: 'mcq',
                difficulty: 'advanced',
                question: 'In reinforcement learning, what does the Q-function represent?',
                options: [
                    'Quality of the model',
                    'Expected reward for taking action a in state s',
                    'Probability distribution over actions',
                    'Number of steps to goal'
                ],
                correct: 1
            },
            {
                id: 39,
                type: 'mcq',
                difficulty: 'advanced',
                question: 'What is the main advantage of XGBoost over traditional gradient boosting?',
                options: [
                    'Simpler implementation',
                    'Faster training and better performance',
                    'No hyperparameters to tune',
                    'Works only with numerical data'
                ],
                correct: 1
            },
            {
                id: 40,
                type: 'mcq',
                difficulty: 'advanced',
                question: 'In transformer architecture, what is the purpose of self-attention?',
                options: [
                    'To reduce model size',
                    'To allow the model to focus on relevant parts of the input',
                    'To speed up training',
                    'To prevent overfitting'
                ],
                correct: 1
            },
            {
                id: 41,
                type: 'text',
                difficulty: 'advanced',
                question: 'Explain the key difference between batch gradient descent and stochastic gradient descent in terms of computational efficiency and convergence.',
                answer: 'Batch gradient descent uses the entire dataset to compute gradients, making it computationally expensive but providing stable convergence. Stochastic gradient descent uses one sample at a time, making it faster per iteration but with noisy convergence.'
            },
            {
                id: 42,
                type: 'mcq',
                difficulty: 'advanced',
                question: 'What is the purpose of batch normalization in neural networks?',
                options: [
                    'To normalize input data',
                    'To normalize activations within the network',
                    'To reduce the number of parameters',
                    'To prevent overfitting'
                ],
                correct: 1
            },
            {
                id: 43,
                type: 'mcq',
                difficulty: 'advanced',
                question: 'In GANs (Generative Adversarial Networks), what is the discriminator trying to do?',
                options: [
                    'Generate realistic data',
                    'Distinguish between real and fake data',
                    'Optimize the generator',
                    'Reduce training time'
                ],
                correct: 1
            },
            {
                id: 44,
                type: 'mcq',
                difficulty: 'advanced',
                question: 'What is the difference between LSTM and GRU?',
                options: [
                    'LSTM has 3 gates, GRU has 2 gates',
                    'LSTM is for classification, GRU is for regression',
                    'GRU is always better than LSTM',
                    'They are exactly the same'
                ],
                correct: 0
            },
            {
                id: 45,
                type: 'mcq',
                difficulty: 'advanced',
                question: 'What is transfer learning in deep learning?',
                options: [
                    'Moving data between systems',
                    'Using pre-trained models on new tasks',
                    'Converting between model formats',
                    'Sharing weights between layers'
                ],
                correct: 1
            },
            {
                id: 46,
                type: 'text',
                difficulty: 'advanced',
                question: 'What is the mathematical formula for calculating the Gini impurity in decision trees?',
                answer: 'Gini = 1 - Î£(pi)Â² where pi is the probability of class i'
            },
            {
                id: 47,
                type: 'mcq',
                difficulty: 'advanced',
                question: 'In A/B testing, what is the multiple comparisons problem?',
                options: [
                    'Testing multiple features at once',
                    'Increased chance of false positives when testing multiple hypotheses',
                    'Comparing more than two groups',
                    'Running tests for too long'
                ],
                correct: 1
            },
            {
                id: 48,
                type: 'mcq',
                difficulty: 'advanced',
                question: 'What is the purpose of the attention mechanism in neural networks?',
                options: [
                    'To reduce computational cost',
                    'To allow models to focus on relevant parts of input',
                    'To prevent gradient vanishing',
                    'To normalize inputs'
                ],
                correct: 1
            },
            {
                id: 49,
                type: 'text',
                difficulty: 'advanced',
                question: 'Describe what happens during the forward pass and backward pass in neural network training.',
                answer: 'Forward pass: Input data flows through the network, activations are computed layer by layer to produce predictions. Backward pass: Gradients are computed starting from the loss function and propagated back through the network to update weights via backpropagation.'
            },
            {
                id: 50,
                type: 'mcq',
                difficulty: 'advanced',
                question: 'What is the main challenge in federated learning?',
                options: [
                    'Lack of computational power',
                    'Data privacy and communication efficiency',
                    'Small dataset sizes',
                    'Limited algorithms available'
                ],
                correct: 1
            }
        ];

        let currentQuestion = 0;
        let userAnswers = {};
        let score = 0;

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
        }

        function renderQuestion() {
            const question = questions[currentQuestion];
            const container = document.getElementById('questionContainer');
            
            let html = `
                <div class="question">
                    <span class="difficulty-badge ${question.difficulty}">${question.difficulty.toUpperCase()}</span>
                    <h3>Q${question.id}: ${question.question}</h3>
            `;

            if (question.type === 'mcq') {
                html += '<div class="options">';
                question.options.forEach((option, index) => {
                    const isSelected = userAnswers[question.id] === index;
                    html += `
                        <div class="option ${isSelected ? 'selected' : ''}" onclick="selectOption(${index})">
                            ${String.fromCharCode(65 + index)}. ${option}
                        </div>
                    `;
                });
                html += '</div>';
            } else if (question.type === 'text') {
                const userAnswer = userAnswers[question.id] || '';
                html += `
                    <textarea class="text-input" placeholder="Enter your answer here..." 
                             onchange="saveTextAnswer(this.value)">${userAnswer}</textarea>
                `;
            }

            html += `
                    <div class="navigation">
                        <button class="btn btn-secondary" onclick="previousQuestion()" 
                                ${currentQuestion === 0 ? 'disabled' : ''}>
                            Previous
                        </button>
                        <span style="color: #666;">Question ${currentQuestion + 1} of ${questions.length}</span>
                        <button class="btn btn-primary" onclick="nextQuestion()">
                            ${currentQuestion === questions.length - 1 ? 'Finish Exam' : 'Next'}
                        </button>
                    </div>
                </div>
            `;

            container.innerHTML = html;
            updateProgress();
        }

        function selectOption(optionIndex) {
            userAnswers[questions[currentQuestion].id] = optionIndex;
            renderQuestion();
        }

        function saveTextAnswer(value) {
            userAnswers[questions[currentQuestion].id] = value.trim();
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                renderQuestion();
            } else {
                finishExam();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuestion();
            }
        }

        function calculateScore() {
            let correctAnswers = 0;
            
            questions.forEach(question => {
                const userAnswer = userAnswers[question.id];
                
                if (question.type === 'mcq') {
                    if (userAnswer === question.correct) {
                        correctAnswers++;
                    }
                } else if (question.type === 'text') {
                    // Simple text matching for demonstration
                    if (userAnswer && question.answer && 
                        userAnswer.toLowerCase().includes(question.answer.toLowerCase().substring(0, 10))) {
                        correctAnswers++;
                    }
                }
            });
            
            return Math.round((correctAnswers / questions.length) * 100);
        }

        function getScoreCategory(score) {
            if (score >= 90) return { class: 'excellent', message: 'Outstanding! ðŸŒŸ', feedback: 'You have exceptional knowledge in Data Science and ML. You\'re ready for senior roles!' };
            if (score >= 75) return { class: 'good', message: 'Great job! ðŸŽ¯', feedback: 'Strong understanding! With a bit more practice on advanced topics, you\'ll be unstoppable.' };
            if (score >= 60) return { class: 'average', message: 'Good effort! ðŸ“ˆ', feedback: 'Solid foundation! Focus on intermediate and advanced concepts to level up your skills.' };
            return { class: 'needs-improvement', message: 'Keep learning! ðŸ’ª', feedback: 'Don\'t worry - everyone starts somewhere. Review the basics and practice more problems.' };
        }

        function createConfetti() {
            const celebration = document.getElementById('celebration');
            celebration.classList.remove('hidden');
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.animationDelay = Math.random() * 3 + 's';
                confetti.style.backgroundColor = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7'][Math.floor(Math.random() * 5)];
                celebration.appendChild(confetti);
            }
            
            setTimeout(() => {
                celebration.classList.add('hidden');
                celebration.innerHTML = '';
            }, 4000);
        }

        function finishExam() {
            score = calculateScore();
            const scoreData = getScoreCategory(score);
            
            document.getElementById('questionContainer').classList.add('hidden');
            document.getElementById('resultsContainer').classList.remove('hidden');
            
            const scoreCircle = document.getElementById('scoreCircle');
            const finalScore = document.getElementById('finalScore');
            const feedback = document.getElementById('feedback');
            
            scoreCircle.className = `score-circle ${scoreData.class}`;
            finalScore.textContent = `${score}%`;
            feedback.innerHTML = `
                <h3>${scoreData.message}</h3>
                <p>${scoreData.feedback}</p>
                <p><strong>You answered ${Math.round((score/100) * questions.length)} out of ${questions.length} questions correctly!</strong></p>
            `;
            
            if (score >= 75) {
                createConfetti();
            }
        }

        function sendResults() {
            const email = document.getElementById('emailInput').value;
            if (!email || !email.includes('@')) {
                alert('Please enter a valid email address');
                return;
            }

            // Create detailed results
            const results = {
                email: email,
                score: score,
                totalQuestions: questions.length,
                correctAnswers: Math.round((score/100) * questions.length),
                timestamp: new Date().toISOString(),
                breakdown: {
                    basic: { total: 15, correct: 0 },
                    intermediate: { total: 20, correct: 0 },
                    advanced: { total: 15, correct: 0 }
                },
                answers: {}
            };

            // Calculate breakdown by difficulty
            questions.forEach(question => {
                const userAnswer = userAnswers[question.id];
                let isCorrect = false;
                
                if (question.type === 'mcq') {
                    isCorrect = userAnswer === question.correct;
                } else if (question.type === 'text') {
                    isCorrect = userAnswer && question.answer && 
                               userAnswer.toLowerCase().includes(question.answer.toLowerCase().substring(0, 10));
                }
                
                if (isCorrect) {
                    results.breakdown[question.difficulty].correct++;
                }
                
                results.answers[question.id] = {
                    question: question.question,
                    userAnswer: question.type === 'mcq' ? 
                              (userAnswer !== undefined ? question.options[userAnswer] : 'Not answered') : 
                              (userAnswer || 'Not answered'),
                    correctAnswer: question.type === 'mcq' ? question.options[question.correct] : question.answer,
                    isCorrect: isCorrect,
                    difficulty: question.difficulty
                };
            });

            // Here you would typically send to your backend
            // For demonstration, we'll create a mailto link with results
            const subject = `Data Science & ML Exam Results - ${score}%`;
            const body = `
Hi there!

Congratulations on completing the Data Science & ML Mastery Challenge!

Your Results:
- Overall Score: ${score}% (${results.correctAnswers}/${results.totalQuestions})
- Basic Level: ${results.breakdown.basic.correct}/${results.breakdown.basic.total} (${Math.round((results.breakdown.basic.correct/results.breakdown.basic.total)*100)}%)
- Intermediate Level: ${results.breakdown.intermediate.correct}/${results.breakdown.intermediate.total} (${Math.round((results.breakdown.intermediate.correct/results.breakdown.intermediate.total)*100)}%)
- Advanced Level: ${results.breakdown.advanced.correct}/${results.breakdown.advanced.total} (${Math.round((results.breakdown.advanced.correct/results.breakdown.advanced.total)*100)}%)

Completed on: ${new Date().toLocaleDateString()}

Keep up the great work in your data science journey!

Best regards,
The DS & ML Challenge Team
            `.trim();

            // Create mailto link
            const mailtoLink = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.open(mailtoLink);
            
            alert('Your results have been prepared! Check your email client to send the detailed report to yourself.');
        }

        // Initialize the exam
        renderQuestion();
    </script>
</body>
    </html>
